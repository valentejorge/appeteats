{% extends "admin/admin.html" %}

{% block title %}QR Code{% endblock %}
{% block head %}
{% endblock %}

{% block main %}

<div>
    <div class="form-header">
        <div class="title mt-5 text-center">
            <h1>Qr Code</h1>
        </div>
    </div>

    <div id="qr-code-container" class="mt-5 d-flex flex-column justify-content-center align-items-center">
        <input id="restaurant-url" type="hidden" value="{{ restaurant_url }}">
        <h1 id="qr-code-title">
            {{ restaurant_name }}
        </h1>

        <div id="qrcode">
        </div>
    </div>
</div>

<script>
    function generateQRCode() {
        const restaurantPath = document.querySelector("#restaurant-url").value;
        const host = window.location.host;
        const restaurantUrl = `${host}/${restaurantPath}`;

        if (restaurantUrl) {
            const qrcodeContainer = document.querySelector("#qrcode");
            const qrcode = qrCodeConstructor(restaurantUrl);

            qrcodeContainer.innerHTML = qrcode;
        } else {
            alert("Fatal error");
        }
    }
    function qrCodeConstructor(url) {
        const div = `
            <img id="qrcode" src="https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=${url}">
        `
        return div;
    }
    generateQRCode();
</script>


{% endblock %}

{% block edit %}{% endblock %}
